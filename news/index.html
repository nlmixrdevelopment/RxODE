<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • RxODE</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Changelog" />
<meta property="og:image" content="https://nlmixrdevelopment.github.io/RxODE/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RxODE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/RxODE-intro.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/RxODE-syntax.html">RxODE mini language syntax</a>
    </li>
    <li>
      <a href="../articles/RxODE-pipeline.html">RxODE with piping ie %&gt;%</a>
    </li>
    <li>
      <a href="../articles/RxODE-speed.html">Speeding up RxODE ODE solving</a>
    </li>
    <li>
      <a href="../articles/RxODE-data-frame.html">Adaptive Data Frames with RxODE</a>
    </li>
    <li>
      <a href="../articles/RxODE-plot.html">Plotting with RxODE</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Advanced Features, Model Types, Technical Details</li>
    <li>
      <a href="../articles/RxODE-model-types.html">RxODE model types</a>
    </li>
    <li>
      <a href="../articles/RxODE-cmt.html">Chainging RxODE compartment numbers</a>
    </li>
    <li>
      <a href="../articles/RxODE-transit-compartments.html">RxODE transit compartment models</a>
    </li>
    <li>
      <a href="../articles/RxODE-shiny.html">Using Shiny with RxODE</a>
    </li>
    <li>
      <a href="../articles/RxODE-covariates.html">RxODE covariates</a>
    </li>
    <li>
      <a href="../articles/RxODE-stiff.html">Stiff Systems and Jacobian specification</a>
    </li>
    <li>
      <a href="../articles/RxODE-rxUse.html">Adding compiled RxODE models to your package</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-stethoscope"></span>
     
    Dosing/Events
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/RxODE-datasets.html">nlmixr/RxODE dataset overview</a>
    </li>
    <li>
      <a href="../articles/RxODE-event-types.html">Supported Event Types</a>
    </li>
    <li>
      <a href="../articles/RxODE-event-table.html">Easy RxODE Event Tables</a>
    </li>
    <li>
      <a href="../articles/RxODE-events-classic.html">Classic RxODE events explained</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-desktop"></span>
     
    Simulations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rxode-single-subject.html">Single Subject ODE solving</a>
    </li>
    <li>
      <a href="../articles/RxODE-sim-var.html">Multiple Subject RxODE Simulation</a>
    </li>
    <li>
      <a href="../articles/RxODE-prior-data.html">Using Prior Data for ODE solving</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-life-ring"></span>
     
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/RxODE-tutorials.html">Running the interactive tutorials</a>
    </li>
    <li>
      <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4728294/pdf/PSP4-5-03.pdf">2015 CPT tutorial</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../articles/RxODE-covariates.html">Adding Circadian Rythmn (time-varying covariates)</a>
    </li>
    <li>
      <a href="../articles/RxODE-wt.html">Weight Based Dosing</a>
    </li>
    <li>
      <a href="../articles/RxODE-nesting.html">Simulating Multiple levels of nesting (iov, between study etc)</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changes/News</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://nlmixrdevelopment.github.io/RxODE/reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-archive"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://nlmixrdevelopment.github.io/RxODE-manual/">RxODE User Guide</a>
    </li>
    <li>
      <a href="https://nlmixrdevelopment.github.io/nlmixr/">nlmixr</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/nlmixrdevelopment/RxODE">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/nlmixrdevelopment/RxODE/releases">
    <span class="fa fa-download"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/nlmixrdevelopment/RxODE/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="rxode-110" class="section level1">
<h1 class="page-header" data-toc-text="1.1.0">
<a href="#rxode-110" class="anchor" aria-hidden="true"></a>RxODE 1.1.0<small> Unreleased </small></h1>
<ul><li><p>Always calculate “nolhs” for using numeric differences when the inner problem. This allows the inner problem to fallback to a finite difference approximation to the focei objective function.</p></li>
<li><p>Updated the parser C code grammar using latest dparser CRAN package</p></li>
<li><p>Added a new cbind function that is used to mix data frame input with simulated individual parameters and residual parameters, <code><a href="../reference/rxCbindStudyIndividual.html">rxCbindStudyIndividual()</a></code>.</p></li>
<li><p>Now data frame input can be mixed with simulating from omega and sigma matrices (though not yet in nested simulations)</p></li>
<li><p>Race conditions when simulating random numbers is solved by chunking each simulation into groups that will always be performed per each thread. This way the simulation is now reproducible regardless of load. Because of the chunking, simulations with random numbers generated inside of it are now threaded by default (though a warning is produced about the simulation only be reproducible when run with the same number of threads)</p></li>
<li><p>Simulations were double checked and made sure to use the engine reserved for each core run in parallel; Some of the random generators were not taking random numbers from the correct engine, which was corrected. Therefore, simulations from this version are expected to be different (in parallel) than previous versions.</p></li>
<li><p>Added function <code><a href="../reference/rxSetSeed.html">rxSetSeed()</a></code> to set the internal RxODE seed instead of grabbing it from a uniform random number tied to the original R seed. This will avoid the possibility of <a href="https://tinyurl.com/m62v3kv9" class="external-link">duplicate seeds</a> and is the best practice.</p></li>
<li><p>Updating parameter pointers is done once per ID and locked based on ID to remove the recursion in <a href='https://github.com/nlmixrdevelopment/RxODE/issues/399'>#399</a>, but still have the correct behavior see <a href='https://github.com/nlmixrdevelopment/RxODE/issues/430'>#430</a></p></li>
<li><p>Parsing updated to retain “param()” in normalized model, <a href='https://github.com/nlmixrdevelopment/RxODE/issues/432'>#432</a>.</p></li>
<li><p>Handle edge case of interpolation at first index correctly, fixes <a href='https://github.com/nlmixrdevelopment/RxODE/issues/433'>#433</a></p></li>
</ul></div>
    <div id="rxode-109" class="section level1">
<h1 class="page-header" data-toc-text="1.0.9">
<a href="#rxode-109" class="anchor" aria-hidden="true"></a>RxODE 1.0.9<small> 2021-05-11 </small></h1>
<ul><li><p>At the request of CRAN, stripping the debugging symbols for the CRAN release is no longer performed. This means a larger binary size for RxODE in this release.</p></li>
<li><p>At the request of CRAN the <code>liblsoda</code> code has been changed so that the memory in C defined by <code>_C()</code> is now defined by <code>_rxC()</code>. This will be seen in some of the error messages, which will no longer match the error messages of unmodified liblsoda.</p></li>
<li>
<p><code>iCov</code> behavior has shifted to merge on the input event dataset. See Issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/409'>#409</a>; This is more in line with expectations of <code>iCov</code> behavior, and reduces the amount of code needed to maintain <code>iCov</code>.</p>
<p>The <code>iCov</code> in the pipeline is no longer supported because it simply is a merge with the event dataset.</p>
<p>This can be a breaking change depending on the code you use. Note that clinical trial simulations, resampling is likely better than trying to fill out <code>iCov</code> for every individual which was the prior use.</p>
</li>
<li><p>Bug fix for crashes with string covariates or factor covariates, issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/410'>#410</a>. Also factor column names are compared with case insensitivity just like the rest of the column names for event tables or data sets in <code>RxODE</code>.</p></li>
</ul></div>
    <div id="rxode-108" class="section level1">
<h1 class="page-header" data-toc-text="1.0.8">
<a href="#rxode-108" class="anchor" aria-hidden="true"></a>RxODE 1.0.8<small> 2021-04-10 </small></h1>
<ul><li>Fix issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/399'>#399</a></li>
</ul></div>
    <div id="rxode-107" class="section level1">
<h1 class="page-header" data-toc-text="1.0.7">
<a href="#rxode-107" class="anchor" aria-hidden="true"></a>RxODE 1.0.7<small> 2021-04-08 </small></h1>
<ul><li><p>Change syntax vignette to use markdown option <code>screenshot.force=FALSE</code>. This should get rid of the <code>webshot</code> error</p></li>
<li><p>Change to depend on dparser 1.3.0, which has some memory fixes</p></li>
</ul></div>
    <div id="rxode-106" class="section level1">
<h1 class="page-header" data-toc-text="1.0.6">
<a href="#rxode-106" class="anchor" aria-hidden="true"></a>RxODE 1.0.6<small> 2021-03-21 </small></h1>
<ul><li><p>RxODE imports but does not link to <code>checkmate</code> any longer. This change should make recompilation of RxODE to work with different releases of <code>checkmate</code> unnecessary.</p></li>
<li><p>Default Solaris solver changed back to “lsoda”</p></li>
<li><p>Fix Bug <a href='https://github.com/nlmixrdevelopment/RxODE/issues/393'>#393</a>, where in certain circumstances <code>rxSolve(...,theta=)</code> did not solve for all subjects.</p></li>
<li><p>Will not ignore NEWS and README when building the package so that they will show up on CRAN. You can also access the news by <code>news(package="RxODE")</code></p></li>
<li><p>Changed <code>ODR</code> model names from time id to <code>_rx</code> followed by the <code>md5</code> hash id and a per-session counter id; For packages the id is <code>_rxp</code> followed by the <code>md5</code> hash and a per-session counter id.</p></li>
<li><p>Changed <code>qs</code> to be more conservative in hash creation. Add a check hash as well as NOT using altrep stringfish representation.</p></li>
</ul></div>
    <div id="rxode-105" class="section level1">
<h1 class="page-header" data-toc-text="1.0.5">
<a href="#rxode-105" class="anchor" aria-hidden="true"></a>RxODE 1.0.5<small> 2021-03-09 </small></h1>
<ul><li><p>Maintenance release – use <code>std::floor</code> and cast variables to <code>double</code> for internal C functions. This should allow a successful compile on Solaris CRAN.</p></li>
<li><p>Changed <code>units</code> from an Imports to a Suggests to allow testing on Solaris rhub</p></li>
<li><p>Changed <code>ODR</code> model names from time id to <code>_rx</code> followed by the <code>md5</code> hash id; For packages the id is <code>_rxp</code> followed by the <code>md5</code> hash.</p></li>
<li>
<p>Removed AD linear compartment solutions for Windows R 3.6, though they still work for Windows R 4.0 (You can get them back for Windows R 3.6 if you install <code>BH</code> 1.66.0-1 and then recompile from source).</p>
<ul><li>This will cause <code>nlmixr</code> to fail with solved systems on Windows 3.6. Currently the Stan Headers do not compile on this system so they are disabled at this time.</li>
</ul></li>
<li><p>RxODE imports but does not link to <code>qs</code> any longer; This change should make recompilation of RxODE to work with different releases of <code>qs</code> unnecessary.</p></li>
<li><p>RxODE now checks for binary compatibility for <code>Rcpp</code>, <code>dparser</code>, <code>checkmate</code>, and <code>PreciseSums</code></p></li>
</ul></div>
    <div id="rxode-104" class="section level1">
<h1 class="page-header" data-toc-text="1.0.4">
<a href="#rxode-104" class="anchor" aria-hidden="true"></a>RxODE 1.0.4<small> 2021-02-24 </small></h1>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor" aria-hidden="true"></a>Breaking changes</h2>
<ul><li><p>RxODE can only use supported functions (could be breaking); You may add your own functions with <code>rxFun</code> and their derivatives with <code>rxD</code></p></li>
<li><p>RxODE now uses its own internal truncated multivariate normal simulations based on the threefry sitmo library. Therefore random numbers generated within <code>RxODE</code> like providing <code>rxSolve(...,omega=)</code> will have different results with this new random number generator. This was done to allow internal re-sampling of sigmas/etas with thread-safe random number generators (calling R through <code>mvnfast</code> or R’s simulation engines are not thread safe).</p></li>
<li><p><code>RxODE</code> now moved the precise sum/product type options for <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> and <code><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod()</a></code> to <code>rxSolve</code> or <code>rxControl</code></p></li>
<li><p><code>cvPost</code> now will returned a named list of matrices if the input matrix was named</p></li>
<li><p><code>rxSolve</code> will now return an integer <code>id</code> instead of a factor <code>id</code> when <code>id</code> is integer or integerish (as defined by checkmate). Otherwise a factor will be returned.</p></li>
<li><p>When mixing ODEs and <code>linCmt()</code> models, the <code>linCmt()</code> compartments are 1 and possibly 2 instead of right after the last internal ODE. This is more aligned with how PK/PD models are typically defined.</p></li>
<li><p><code>EVID=3</code> and <code>EVID=4</code> now (possibly) reset time as well. This occurs when the input dataset is sorted before solving.</p></li>
<li><p>When <code>EVID=2</code> is present, an <code>evid</code> column is output to distinguish <code>evid=0</code> and <code>evid=2</code></p></li>
</ul></div>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor" aria-hidden="true"></a>New features</h2>
<ul><li><p>Add the ability to order input parameters with the <code>param()</code> pseudo-function</p></li>
<li><p>Add the ability to resample covariates with <code>resample=TRUE</code> or <code>resample=c("SEX", "CRCL")</code>. You can resample all the covariates by <code>ID</code> with <code>resampleID=TRUE</code> or resample the covariates without respect to <code>ID</code> with <code>resampleID=FALSE</code></p></li>
<li><p>Comparison of factors/strings is now supported in <code>RxODE</code>; Therefore ID==“Study-1” is now allowed.</p></li>
<li><p>Completion for elements of <code><a href="../reference/rxSolve.html">rxSolve()</a></code> objects, and <code><a href="../reference/et.html">et()</a></code> objects have been added (accessed through <code>$</code>)</p></li>
<li><p>Completion of <code><a href="../reference/rxSolve.html">rxSolve()</a></code> arguments are now included since they are part of the main method</p></li>
<li><p>Allow simulation with zero matrices, that provide the simulation without variability. This affects <code>rxSolve</code> as well as <code>rxMvnrnd</code> and <code>cvPost</code> (which will give a zero matrix whenever one is specified)</p></li>
<li><p><code><a href="../reference/et.html">et()</a></code> can dose with <code>length(amt) &gt; 1</code> as long as the other arguments can create a event table.</p></li>
<li><p>Rstudio notebook output makes more sense</p></li>
<li><p>Printing upgraded to cli 2.0</p></li>
<li>
<p>Caching of internal C data setup is now supported increasing speed of <code>optim</code> code when:</p>
<ul><li>Event Table doesn’t change</li>
<li>The size of the parameters doesn’t change</li>
<li>
<code>inits</code> do not change (though you can specify them as <code>cmt(0)=...</code> in the model and change them by parameters)</li>
<li>See Issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/109'>#109</a></li>
</ul></li>
<li><p>Allow <code>while(logical)</code> statements with ability to break out if them by <code><a href="https://rdrr.io/r/base/Control.html" class="external-link">break</a></code>. The while has an escape valve controlled by <code>maxwhere</code> which by default is 10000 iterations. It can be change with <code>rxSolve(..., maxwhere = NNN)</code></p></li>
<li>
<p>Allow accessing different time-varying components of an input dataset for each individual with:</p>
<ul><li><code>lag(var, #)</code></li>
<li><code>lead(var, #)</code></li>
<li><code>first(var)</code></li>
<li><code>last(var)</code></li>
<li><code>diff(var)</code></li>
</ul></li>
</ul><p>Each of these are similar to the R <code>lag</code>, <code>lead</code>, <code>first</code>, <code>last</code> and <code>diff</code>. However when undefined, it returns <code>NA</code></p>
<ul><li>
<p>Allow sticky left-handed side of the equation; This means for an observation the left handed values are saved for the next observations and then reassigned to the last calculated value.</p>
<p>This allows NONMEM-style of calculating parameters like tad:</p>
</li>
</ul><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">mod1</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/RxODE.html">RxODE</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">KA</span><span class="op">=</span><span class="fl">2.94E-01</span>;
    <span class="va">CL</span><span class="op">=</span><span class="fl">1.86E+01</span>;
    <span class="va">V2</span><span class="op">=</span><span class="fl">4.02E+01</span>;
    <span class="va">Q</span><span class="op">=</span><span class="fl">1.05E+01</span>;
    <span class="va">V3</span><span class="op">=</span><span class="fl">2.97E+02</span>;
    <span class="va">Kin</span><span class="op">=</span><span class="fl">1</span>;
    <span class="va">Kout</span><span class="op">=</span><span class="fl">1</span>;
    <span class="va">EC50</span><span class="op">=</span><span class="fl">200</span>;
    <span class="va">C2</span> <span class="op">=</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span>;
    <span class="va">C3</span> <span class="op">=</span> <span class="va">peri</span><span class="op">/</span><span class="va">V3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">depot</span><span class="op">)</span> <span class="op">=</span><span class="op">-</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">=</span> <span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">peri</span><span class="op">)</span>  <span class="op">=</span>                    <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">eff</span><span class="op">)</span>  <span class="op">=</span> <span class="va">Kin</span> <span class="op">-</span> <span class="va">Kout</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">C2</span><span class="op">/</span><span class="op">(</span><span class="va">EC50</span><span class="op">+</span><span class="va">C2</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="va">eff</span>;
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">amt</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">tdose</span> <span class="op">&lt;-</span> <span class="va">time</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
        <span class="va">tad</span> <span class="op">&lt;-</span> <span class="va">time</span> <span class="op">-</span> <span class="va">tdose</span>
    <span class="op">}</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>It is still simpler to use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">mod1</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/RxODE.html">RxODE</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">KA</span><span class="op">=</span><span class="fl">2.94E-01</span>;
    <span class="va">CL</span><span class="op">=</span><span class="fl">1.86E+01</span>;
    <span class="va">V2</span><span class="op">=</span><span class="fl">4.02E+01</span>;
    <span class="va">Q</span><span class="op">=</span><span class="fl">1.05E+01</span>;
    <span class="va">V3</span><span class="op">=</span><span class="fl">2.97E+02</span>;
    <span class="va">Kin</span><span class="op">=</span><span class="fl">1</span>;
    <span class="va">Kout</span><span class="op">=</span><span class="fl">1</span>;
    <span class="va">EC50</span><span class="op">=</span><span class="fl">200</span>;
    <span class="va">C2</span> <span class="op">=</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span>;
    <span class="va">C3</span> <span class="op">=</span> <span class="va">peri</span><span class="op">/</span><span class="va">V3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">depot</span><span class="op">)</span> <span class="op">=</span><span class="op">-</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">=</span> <span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">peri</span><span class="op">)</span>  <span class="op">=</span>                    <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>;
    <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">eff</span><span class="op">)</span>  <span class="op">=</span> <span class="va">Kin</span> <span class="op">-</span> <span class="va">Kout</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">C2</span><span class="op">/</span><span class="op">(</span><span class="va">EC50</span><span class="op">+</span><span class="va">C2</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="va">eff</span>;
    <span class="va">tad</span> <span class="op">&lt;-</span> <span class="va">time</span> <span class="op">-</span> <span class="va">tlast</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>If the <code>lhs</code> parameters haven’t been defined yet, they are <code>NA</code></p>
<ul><li><p>Now the NONMEM-style <code>newind</code> flag can be used to initialize <code>lhs</code> parameters.</p></li>
<li><p>Added <code>tad()</code>, <code>tad(cmt)</code> functions for time since last dose and time since last dose for a compartment; Also added time after first dose and time after first dose for a compartment <code>tafd()</code>, <code>tafd(cmt)</code>; time of last dose <code>tlast()</code>, <code>tlast(cmt)</code> and dose number <code>dosenum()</code> (currently not for each compartment)</p></li>
<li><p>Changed linear solved systems to use “advan” style <code>linCmt()</code> solutions, to allow correct solutions of time-varying covariates values with solved systems; As such, the solutions may be slightly different. Infusions to the depot compartment are now supported.</p></li>
<li>
<p>Added sensitivity auto-differentiation of <code>linCmt()</code> solutions. This allows sensitivities of <code>linCmt()</code> solutions and enables <code>nlmixr</code> focei to support solved systems.</p>
<ul><li>One solution is to use Stan’s auto-differentiation which requires <code>C++14</code>
</li>
</ul></li>
<li><p>When calculating the empirical Bayesian estimates for with <code>rxInner</code> (used for nlmixr’s ‘focei’) ignore any variable beginning with <code>rx_</code> and <code>nlmixr_</code> to hide internal variables from table output. This also added <code>tad=tad()</code> and <code>dosenum=dosenum()</code> to the <code>ebe</code> output allowing grouping by id, dose number and use TAD for individual plot stratification.</p></li>
<li><p>Added ability to prune branching with <code>rxPrune</code>. This converts <code>if</code>/<code>else</code> or <code>ifelse</code> to single line statements without any <code>if</code>/<code>then</code> branching within them.</p></li>
<li>
<p>Added ability to take more complex conditional expressions, including:</p>
<ul><li><code>ifelse(expr, yes, no)</code></li>
<li><code>x = (x==1)*1 + (!(x==1))*2</code></li>
<li>
<code>if (logic){ expr} else if (logic) {expr} else {}</code>. The preferred syntax is still only <code>if</code>/<code>else</code> and the corresponding parsed code reflects this preference.
<ul><li>Note <code>ifelse</code> is not allowed as an ODE compartment or a variable.</li>
</ul></li>
</ul></li>
<li>
<p>Switched to <code>symengine</code> instead of using <code>sympy</code></p>
<ul><li>Remove dependence on python.</li>
<li>Since symengine is C-based and doesn’t require the python interface it is much faster than <code>sympy</code>, though some functions in <code>sympy</code> are no longer accessible.</li>
<li>Also symengine requires R 3.6, so now RxODE requires R 3.6</li>
</ul></li>
<li><p>Added new ODE solving method “indLin”, or inductive linearization. When the full model is a linear ODE system this becomes simply the matrix exponential solution. Currently this requires a different setup.</p></li>
<li>
<p>Added arbitrary function definition to RxODE using <code>rxFun</code></p>
<ul><li>Requires function, arguments and corresponding C-code</li>
<li>Derivatives (if required) can be added to the derivative table <code>rxD</code>. When taking deviates without a derivative function, RxODE will use numerical differences.</li>
</ul></li>
<li>
<p>Will error if RxODE does not know of a function that you are trying to use; This could be a breaking change. Currently:</p>
<ul><li>C’s functions from <code>math.h</code> are supported</li>
<li>R’s function returning and taking doubles are supported</li>
<li>Other functions can be added using <code>rxFun</code> and <code>rxD</code>
</li>
</ul></li>
<li><p>Added <code>NA</code>, <code>NaN</code>, <code>Inf</code> and <code>+Inf</code> handling to a RxODE model. Can be useful to diagnose problems in models and provide alternate solutions. In addition, added R-like functions <code>is.nan</code>, <code>is.na</code>, <code>is.finite</code> and <code>is.infinite</code> which can be called within the RxODE block.</p></li>
<li>
<p>Allowed the following data variables can be accessed (but not assigned or used as a state):</p>
<ul><li><code>cmt</code></li>
<li><code>dvid</code></li>
<li><code>addl</code></li>
<li><code>ss</code></li>
<li><code>amt</code></li>
<li><code>rate</code></li>
<li>
<code>id</code> which requires calling the id as factor <code>ID=="1"</code> for instance.</li>
</ul></li>
<li><p>Kept <code>evid</code> and <code>ii</code> as restricted items since they are not part of the covariate table and are restricted in use.</p></li>
<li>
<p>Added the following random number generators; They are thread safe (based on <code>threefry</code> <code>sitmo</code> and c++11) and your simulations with them will depend on the number of cores used in your simulation (Be careful about reproducibility with large number of threads; Also use parallel-solve type of RxODE simulations to avoid the <a href="https://www.johndcook.com/blog/2016/01/29/random-number-generator-seed-mistakes/" class="external-link">birthday problem</a>).</p>
<p>During ODE solving, the values of these are <code>0</code>, but while calculating the final output the variable is randomized at least for every output. These are:</p>
<ul><li>
<code><a href="../reference/rxnormV.html">rxnorm()</a></code> and <code><a href="../reference/rxnormV.html">rxnormV()</a></code> (low discrepancy normal)</li>
<li><code><a href="../reference/rxcauchy.html">rxcauchy()</a></code></li>
<li><code><a href="../reference/rxchisq.html">rxchisq()</a></code></li>
<li><code><a href="../reference/rxexp.html">rxexp()</a></code></li>
<li><code><a href="../reference/rxf.html">rxf()</a></code></li>
<li><code><a href="../reference/rxgamma.html">rxgamma()</a></code></li>
<li><code><a href="../reference/rxbeta.html">rxbeta()</a></code></li>
<li><code><a href="../reference/rxgeom.html">rxgeom()</a></code></li>
<li><code><a href="../reference/rxpois.html">rxpois()</a></code></li>
<li><code><a href="../reference/rxt.html">rxt()</a></code></li>
<li><code><a href="../reference/rxunif.html">rxunif()</a></code></li>
<li><code><a href="../reference/rxweibull.html">rxweibull()</a></code></li>
</ul><p>In addition, while initializing the system, the following values are simulated and retained for each individual:</p>
<ul><li>
<code>rinorm()</code> and <code>rinormV()</code> (low discrepancy normal)</li>
<li><code>ricauchy()</code></li>
<li><code>richisq()</code></li>
<li><code>riexp()</code></li>
<li><code>rif()</code></li>
<li><code>rigamma()</code></li>
<li><code>ribeta()</code></li>
<li><code>rigeom()</code></li>
<li><code>ripois()</code></li>
<li><code>rit()</code></li>
<li><code>riunif()</code></li>
<li><code>riweibull()</code></li>
</ul></li>
<li><p>Added <code>simeta()</code> which simulates a new <code>eta</code> when called based on the possibly truncated normal <code>omega</code> specified by the original simulation. This simulation occurs at the same time as the ODE is initialized or when an ODE is missing, before calculating the final output values. The <code>omega</code> will reflect whatever study is being simulated.</p></li>
<li><p>Added <code>simeps()</code> which simulates a new <code>eps</code> from the possibly truncated normal <code>sigma</code> at the same time as calculating the final output values. Before this time, the <code>sigma</code> variables are zero.</p></li>
</ul><p>All these change the solving to single thread by default to make sure the simulation is reproducible. With high loads/difficult problems the random number generator may be on a different thread and give a different number than another computer/try.</p>
<p>Also please note that the <code>clang</code> and <code>gcc</code> compiler use different methods to create the more complex random numbers. Therefore <code>MacOS</code> random numbers will be different than <code>Linux</code>/<code>Windows</code> at this time (with the exception of uniform numbers).</p>
<p>These numbers are still non-correlated random numbers (based on the sitmo test) with the exception of the vandercorput distributions, so if you increase the number of threads (cores=…) the results should still be valid, though maybe harder to reproduce. The faster the random number generation, the more likely these results will be reproduced across platforms.</p>
<ul><li><p>Added the ability to integrate standard deviations/errors of omega diagonals and sigma diagonals. This is done by specifying the omega diagonals in the theta matrix and having them represent the variabilities or standard deviations. Then these standard deviations are simulated along with the correlations using the IJK correlation matrix (omega dimension &lt; 10) or a correlation matrix or Inverse Wishart-based correlation matrix (omega dimension &gt; 10). The information about how to simulate this is in the variability simulation vignette.</p></li>
<li><p>Now have a method to use <code>lotri</code> to simulate between occasion variability and other levels of nesting.</p></li>
<li><p>Added lower gamma functions See Issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/185'>#185</a></p></li>
<li><p>Upgraded comparison sort to timsort 2.0.1</p></li>
<li><p>Changed in-place sort to a modified radix sort from <code>data.table</code>. The radix search was modified to:</p></li>
<li><p>Work directly with <code>RxODE</code> internal solved structures</p></li>
<li><p>Assume no infinite values or <code>NA</code>/<code>NaN</code> values of time</p></li>
<li><p>Always sort time in ascending order</p></li>
<li><p>Changed sorting to run in a single thread instead of taking over all the threads like data.table</p></li>
<li><p>Changed method for setting/getting number of threads based on <code>data.table</code>’s method</p></li>
<li><p>Added function <code>rxDerived</code> which will calculate derived parameters for 1, 2, and 3 compartment models</p></li>
<li><p>More descriptive errors when types of input are different than expected</p></li>
</ul></div>
<div id="engine-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#engine-changes" class="anchor" aria-hidden="true"></a>Engine changes</h2>
<ul><li>
<p>Moved many C functions to C++. CRAN OpenMP support requires C++ only when C and C++ are mixed. See:</p>
<p><a href="https://stackoverflow.com/questions/54056594/cran-acceptable-way-of-linking-to-openmp-some-c-code-called-from-rcpp" class="external-link uri">https://stackoverflow.com/questions/54056594/cran-acceptable-way-of-linking-to-openmp-some-c-code-called-from-rcpp</a></p>
</li>
<li><p>No longer produces C code that create the model variables. Instead, use <code>qs</code> to serialize, compress and encode in base91 and then write the string into the C file. The <code>qs</code> package then decodes all of that into the model variables. This also increases the compilation speed for models in RxODE.</p></li>
<li><p>Pre-compile RxODE headers once (if cache is enabled), which increases compilation speed for models in RxODE</p></li>
<li><p><code>RxODE</code>’s translation from the mini-language to C has been refactored</p></li>
</ul></div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor" aria-hidden="true"></a>Bug fixes:</h2>
<ul><li><p>Occasionally RxODE misidentified dual <code>lhs</code>/<code>param</code> values. An additional check is performed so that this does not happen.</p></li>
<li><p>For solved matrices with similar names (like “tadd” and “tad”) RxODE will now prefer exact matches instead of the first match found when accessing the items with <code>$tad</code>.</p></li>
<li><p>A fix where all ID information is kept with <code>keep=c(""..."")</code></p></li>
<li><p>Transit compartment models using the <code>transit</code> ODE or variable are now allowed. Also check for more internally parsed items (see Issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/145'>#145</a>).</p></li>
<li><p>Bug fix for <code>etSeq</code> and <code>etRep</code> where greater than 2 items were mis-calculated</p></li>
</ul></div>
</div>
    <div id="rxode-v092-0" class="section level1">
<h1 class="page-header" data-toc-text="0.9.2-0">
<a href="#rxode-v092-0" class="anchor" aria-hidden="true"></a>RxODE v0.9.2-0<small> 2020-03-13 </small></h1>
<ul><li>New plotting engine</li>
<li>Various bug fixes for upcoming R 4.0 release:
<ul><li>Dropped some imports for 21 imports restriction</li>
<li>Fixed incompatibility with new <code>ggplot2</code> 3.3.0</li>
<li>Fixed allowing <code>NA</code>s in RxODE dataset</li>
<li>Fixed setting all compartment default values for bioavailability, rate, etc.</li>
<li>Added additional protection against floating point -&gt; NaN for power functions</li>
</ul></li>
</ul></div>
    <div id="rxode-v091-9" class="section level1">
<h1 class="page-header" data-toc-text="0.9.1-9">
<a href="#rxode-v091-9" class="anchor" aria-hidden="true"></a>RxODE v0.9.1-9<small> 2020-01-10 </small></h1>
<ul><li>Minor namespace/documentation changes for R 4.0 compatibility</li>
</ul></div>
    <div id="rxode-v091-8" class="section level1">
<h1 class="page-header" data-toc-text="0.9.1-8">
<a href="#rxode-v091-8" class="anchor" aria-hidden="true"></a>RxODE v0.9.1-8<small> 2019-11-12 </small></h1>
<ul><li>Added the ability to have an input parameter to be assigned to a new value (Issue <a href='https://github.com/nlmixrdevelopment/RxODE/issues/135'>#135</a>)</li>
<li>Added LINPACK authors as contributors</li>
<li>Added a <code>NEWS.md</code> file to track changes to the package</li>
</ul><!--  LocalWords:  resample covariates Rstudio NONMEM advan focei
 --><!--  LocalWords:  nlmixr's symengine linearization RxODE
 --><!--  LocalWords:  reproducibility
 --></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Matthew L. Fidler, Melissa Hallow, Wenping Wang.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '038b4d83946a52a95a9f8bdafe822dbe',
    indexName: 'rxode',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  

  </body>
</html>


